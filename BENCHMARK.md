# Overview

Benchmarks are an average response time over 1000 measurements with a variable amount of items and variable amount of map and filter operations. Benchmarks are conducted across three browsers (Safari, Chrome and Firefox) and two runtime environments (Node and Bun). Measurements were conducted across ArrayStream (this library), Array methods (i.e. `Array.filter` and `Array.map`) and [itertools](https://github.com/nvie/itertools).

-   Amount of items increases along the X axis
-   Amount of operations increases along the Y axis
-   Execution time is in milliseconds with the first item being ArrayStream, the second built-in Array methods and third itertools.

## Data

### Chrome

|         |     1     |      10      |     100      |     1000     |   10000    |    100000     |     1000000      |
| ------: | :-------: | :----------: | :----------: | :----------: | :--------: | :-----------: | :--------------: |
|       1 |   0/0/0   |    0/0/0     |    0/0/0     |    0/0/0     |  0/0/2.5   |   9/4.5/23    | 189.5/22.5/224.5 |
|      10 |   0/0/0   |    0/0/0     |    0/0/0     |    0/0/0     |  0/0/2.5   |   8/4.5/23    |   175/24/225.5   |
|     100 |   0/0/0   |    0/0/0     |    0/0/0     |    0/0/0     |  0/0/2.5   |  7.5/5.5/23   |  202.5/23.5/225  |
|    1000 |   0/0/0   |    0/0/0     |    0/0/0     |   0/0/0.5    |  0/0/2.5   |  7.5/5.5/23   |   244.5/23/225   |
|   10000 | 0.5/0.5/1 |  0.5/0.5/1   |  0.5/0.5/1   |  0.5/0.5/1   | 0.5/0.5/3  |  8.5/4.5/24   |  175/24.5/225.5  |
|  100000 | 4/5.5/7.5 |  4/5.5/7.5   |   4/5.5/8    |   4/5.5/8    |  4.5/6/10  |  13/10/30.5   |  226.5/29/232.5  |
| 1000000 | 40/57/77  | 40.5/60/81.5 | 40.5/60/81.5 | 40.5/60/82.5 | 43.5/60/84 | 55.5/62/104.5 |    302/79/307    |

### Firefox

|         |       1        |       10        |     100     |     1000     |    10000    |    100000    |    1000000     |
| ------: | :------------: | :-------------: | :---------: | :----------: | :---------: | :----------: | :------------: |
|       1 |     0/0/0      |      0/0/0      |    0/0/0    |   0/0/0.5    |   0.5/1/4   |   7/5.5/37   |  186/46.5/377  |
|      10 |     0/0/0      |      0/0/0      |    0/0/0    |   0/0/0.5    |  0.5/1/3.5  |  8.5/5.5/37  |  87.5/47/381   |
|     100 |     0/0/0      |      0/0/0      |    0/0/0    |   0/0/0.5    |  0.5/1/3.5  |   9/6/39.5   | 183.5/46/376.5 |
|    1000 |     0/0/0      |      0/0/0      |    0/0/0    |   0/0/0.5    |   0.5/1/4   | 8.5/5.5/38.5 | 129/46.5/378.5 |
|   10000 |    0.5/0/1     |      0/0/1      |    0/0/1    |  0.5/0/1.5   |   0.5/1/5   |  8.5/6/39.5  | 158.5/46/378.5 |
|  100000 |    2/1.5/9     |    2/1.5/9.5    | 2.5/1.5/10  | 2.5/1.5/10.5 | 3/2.5/13.5  | 10/7.5/48.5  |   139/48/392   |
| 1000000 | 23.5/16.5/93.5 | 23.5/17.5/114.5 | 26/29/104.5 | 23.5/17/98.5 | 24/18.5/104 | 30/22.5/138  | 157.5/64/474.5 |

### Safari

|         |      1      |      10       |     100     |     1000      |    10000    |   100000   |     1000000     |
| ------: | :---------: | :-----------: | :---------: | :-----------: | :---------: | :--------: | :-------------: |
|       1 |    0/0/0    |     0/0/0     |    0/0/0    |     0/0/0     |  0/0.5/1.5  |  1.5/4/17  |  28/46.5/327.5  |
|      10 |    0/0/0    |     0/0/0     |    0/0/0    |    0/0/0.5    | 0.5/0.5/2.5 |  4.5/5/24  | 41.5/42.5/262.5 |
|     100 |    0/0/0    |     0/0/0     |    0/0/0    |    0/0/0.5    |  0.5/0.5/2  | 3.5/4.5/20 |  36.5/43.5/281  |
|    1000 |    0/0/0    |     0/0/0     |    0/0/0    |    0/0/0.5    | 0.5/0.5/2.5 |  4/4.5/21  |  37.5/45/284.5  |
|   10000 |   0/0/0.5   |   0.5/0/0.5   |    0/0/0    |   0.5/0/0.5   | 0.5/0.5/2.5 |  4/4.5/17  |  39/44.5/263.5  |
|  100000 |    2/1/2    |     2/1/2     |   1.5/1/2   |    2/1/2.5    |    2/1/5    |  5/5/23.5  |  35.5/47/206.5  |
| 1000000 | 16.5/7.5/22 | 16.5/7.5/21.5 | 16.5/7.5/23 | 16.5/7.5/23.5 |   17/8/25   | 19/10.5/50 |  61/40.5/150.5  |

### Node

|         |         1          |        10         |        100        |       1000        |      10000       |       100000       |       1000000       |
| ------: | :----------------: | :---------------: | :---------------: | :---------------: | :--------------: | :----------------: | :-----------------: |
|       1 |      0.02/0/0      |       0/0/0       |    0.01/0/0.03    |  0.06/0.02/0.28   |  0.43/0.19/2.31  |  11.08/0.6/25.45   | 186.17/9.61/233.44  |
|      10 |      0.01/0/0      |       0/0/0       |     0/0/0.03      |  0.02/0.01/0.23   |  0.3/0.05/2.37   |   9.72/1.66/25.6   | 180.89/15.34/233.9  |
|     100 |    0.02/0/0.01     |    0.01/0/0.01    |    0.01/0/0.04    |  0.04/0.01/0.25   |  0.34/0.05/2.35  |  10.12/0.91/25.63  | 164.12/13.66/235.02 |
|    1000 |   0.08/0.03/0.12   |  0.08/0.04/0.11   |  0.08/0.04/0.13   |   0.1/0.04/0.34   |  0.36/0.08/2.5   |  9.71/1.94/25.58   | 159.23/13.84/235.63 |
|   10000 |   0.46/0.35/0.93   |  0.45/0.34/0.85   |  0.43/0.33/0.82   |  0.44/0.33/1.02   |  0.7/0.37/3.22   |  10.05/2.5/26.81   | 183.88/11.94/234.68 |
|  100000 |   4.41/4.65/8.01   |  4.29/4.53/8.38   |  4.31/4.51/8.42   |  4.31/4.58/8.64   | 4.67/5.19/11.02  |  14.71/6.05/33.56  | 158.99/18.72/243.91 |
| 1000000 | 43.54/43.84/190.06 | 43.16/46.33/88.49 | 43.16/45.05/88.42 | 43.74/45.16/91.25 | 47.1/45.92/89.45 | 59.97/48.37/110.41 | 209.22/53.35/319.78 |

### Bun

|         |        1         |        10        |       100       |       1000       |      10000       |      100000       |      1000000       |
| ------: | :--------------: | :--------------: | :-------------: | :--------------: | :--------------: | :---------------: | :----------------: |
|       1 |      0/0/0       |      0/0/0       |    0/0/0.01     |  0.02/0.04/0.24  |  0.12/0.31/1.1   |  1.73/3.77/12.32  |   22.7/36.28/123   |
|      10 |     0.01/0/0     |      0/0/0       |    0/0/0.01     |  0.02/0.03/0.13  |  0.14/0.33/1.25  |  1.79/3.84/12.49  | 22.27/37.33/122.69 |
|     100 |     0.01/0/0     |      0/0/0       |    0/0/0.01     |  0.03/0.03/0.13  |  0.13/0.31/1.3   |  1.49/3.73/12.38  | 22.93/36.76/123.11 |
|    1000 |  0.02/0.01/0.03  |  0.02/0.01/0.02  | 0.02/0.01/0.03  |  0.03/0.04/0.14  |  0.14/0.32/1.39  |  1.4/3.67/12.49   | 23.18/36.29/122.92 |
|   10000 |  0.17/0.08/0.19  |  0.15/0.09/0.2   |  0.15/0.08/0.2  |  0.16/0.11/0.3   |  0.26/0.4/1.61   |  1.59/3.81/12.86  | 22.44/36.49/123.35 |
|  100000 |  1.44/0.65/1.68  |  1.44/0.76/1.86  | 1.71/0.77/1.87  |  1.46/0.74/1.91  |  1.69/1.31/2.99  |  4.15/4.69/14.28  | 26.06/36.67/125.19 |
| 1000000 | 15.49/6.68/17.72 | 15.22/7.86/17.99 | 15.08/7.1/18.39 | 15.24/7.33/18.37 | 15.79/7.39/19.71 | 17.72/10.77/31.12 | 41.79/40.06/136.7  |

## Conclusions

In almost all contexts, native methods are better than ArrayStream, which in turn is almost always better than itertools. In V8 environments (the majority that you will encounter), the native methods outperform to a significant degree (especially in larger datasets with more operations). No JavaScript package will be able to outperform the native V8 engine because JavaScript-land cannot access the garbage collection and memory optimizations that the engine has access to. We cannot manually collect garbage nor modify an iterator internally, which is probably what costs the ArrayStream library its performance. That said, if [iterator adapters](https://github.com/tc39/proposal-iterator-helpers) get added to JavaScript, I may be able to increase performance. One thing to note is that in execution environments that use Webkit (Safari and Bun), the ArrayStream is competitive surprisingly.

My suggestion is that you should use this library if you want a friendly, full-featured iterator library using a builder pattern and want moderately better performance than the itertools library. If performance is critical, I suggest you use a single `for` loop.
